<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>jQuery</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">
    <style>
        .on { background-color: yellow; }
    </style>
</head>
<body>

<script src="https://code.jquery.com/jquery-1.12.1.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.1.js"><\/script>')</script>

    <div class="room" id="kitchen">
        kuchnia
        <div class="lightbulb on">żarówka</div>
        <div class="switch">przełącznik 1</div>
        <div class="switch">przełącznik 2</div>
        <div class="clapper">przełącznik 3</div>
    </div>
    <div class="room" id="bedroom">
        sypialnia
        <div class="lightbulb on">żarówka</div>
        <div class="switch">przełącznik 1</div>
        <div class="switch">przełącznik 2</div>
        <div class="clapper">przełącznik 3</div>
    </div>
    <div id="master_switch">głóny przełącznik</div>

<script>
    $( ".lightbulb" ).on( "light:toggle", function( event ) {
        var light = $( this );
        if ( light.is( ".on" ) ) {
            light.trigger( "light:off" );
        } else {
            light.trigger( "light:on" );
        }
    }).on( "light:on", function( event ) {
        $( this ).removeClass( "off" ).addClass( "on" );
    }).on( "light:off", function( event ) {
        $( this ).removeClass( "on" ).addClass( "off" );
    });

    $( ".switch, .clapper" ).click(function() {
        var room = $( this ).closest( ".room" );
        room.find( ".lightbulb" ).trigger( "light:toggle" );
    });

    $( "#master_switch" ).click(function() {
        var lightbulbs = $( ".lightbulb" );

        // Check if any lightbulbs are on
        if ( lightbulbs.is( ".on" ) ) {
            lightbulbs.trigger( "light:off" );
        } else {
            lightbulbs.trigger( "light:on" );
        }
    });
</script>

</body>
</html>
